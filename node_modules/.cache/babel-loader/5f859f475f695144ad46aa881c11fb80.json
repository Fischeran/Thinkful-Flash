{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alnfi\\\\coding projects\\\\Thinkful-Flash\\\\src\\\\Layout\\\\Home\\\\Deck\\\\EditCard\\\\EditCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { readCard, readDeck, updateCard } from \"../../../../utils/api\";\nimport { useParams, Link, useHistory } from \"react-router-dom\";\nimport CardForm from \"../CardForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction EditCard() {\n  _s();\n\n  const initialCard = {\n    front: \"\",\n    back: \"\"\n  };\n  const initialDeck = {\n    name: \"\",\n    description: \"\",\n    cards: []\n  };\n  const {\n    cardId,\n    deckId\n  } = useParams();\n  const [card, setCard] = useState(initialCard);\n  const [deck, setDeck] = useState(initialDeck);\n  const abortController = new AbortController();\n  const [formData, setFormData] = useState({ ...initialCard\n  });\n  useEffect(() => {\n    setDeck(initialDeck);\n    setCard(initialCard);\n\n    async function currentDeck(deckId, cardId) {\n      try {\n        const currentDeck = await readDeck(deckId, abortController.signal);\n        const currentCard = await readCard(cardId, abortController.signal);\n        setDeck({ ...currentDeck\n        });\n        setCard({ ...currentCard\n        });\n        setFormData({ ...currentCard\n        });\n      } catch (error) {\n        console.log(error);\n      }\n\n      ;\n    }\n\n    ; //getting and returning the deck fine but having issues setting state \n\n    currentDeck(deckId, cardId);\n    return () => abortController.abort();\n  }, [deckId]);\n\n  function changeHandler(_ref) {\n    let {\n      target\n    } = _ref;\n    setFormData({ ...formData,\n      [target.name]: target.value\n    });\n  }\n\n  const history = useHistory();\n\n  async function submitHandler(event) {\n    event.preventDefault();\n    const updatedCard = { ...card,\n      front: formData.front,\n      back: formData.back\n    };\n    await updateCard(updatedCard, abortController.signal);\n    history.push(`/decks/${deckId}`);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      \"aria-label\": \"breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"breadcrumb\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"breadcrumb-item\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"breadcrumb-item\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/decks/${deckId}`,\n            children: deck.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"breadcrumb-item\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: `Edit Card ${card.id}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 53\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Card\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardForm, {\n      submitHandler: submitHandler,\n      formData: formData,\n      changeHandler: changeHandler,\n      deckId: deckId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditCard, \"yEhBPUhjYoptht2ExQ62h5Opf40=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = EditCard;\nexport default EditCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditCard\");","map":{"version":3,"names":["React","useEffect","useState","readCard","readDeck","updateCard","useParams","Link","useHistory","CardForm","EditCard","initialCard","front","back","initialDeck","name","description","cards","cardId","deckId","card","setCard","deck","setDeck","abortController","AbortController","formData","setFormData","currentDeck","signal","currentCard","error","console","log","abort","changeHandler","target","value","history","submitHandler","event","preventDefault","updatedCard","push","id"],"sources":["C:/Users/alnfi/coding projects/Thinkful-Flash/src/Layout/Home/Deck/EditCard/EditCard.js"],"sourcesContent":["import React, { useEffect , useState} from \"react\";\r\nimport { readCard, readDeck , updateCard } from \"../../../../utils/api\";\r\nimport { useParams , Link , useHistory } from \"react-router-dom\";\r\nimport CardForm from \"../CardForm\";\r\n\r\n\r\nfunction EditCard() {\r\n\r\n    const initialCard = {\r\n        front: \"\",\r\n        back: \"\",\r\n    }\r\n\r\n    const initialDeck = {\r\n        name: \"\",\r\n        description: \"\",\r\n        cards: []\r\n    }\r\n\r\n\r\n    const { cardId , deckId } = useParams();\r\n    const [card, setCard] = useState(initialCard);\r\n    const [deck, setDeck] = useState(initialDeck);\r\n    const abortController = new AbortController();\r\n    const [formData, setFormData] = useState({...initialCard});\r\n\r\n    useEffect(() => {\r\n        setDeck(initialDeck);\r\n        setCard(initialCard);\r\n            \r\n        async function currentDeck(deckId, cardId) {\r\n            try{\r\n            const currentDeck = await readDeck(deckId, abortController.signal);\r\n            const currentCard = await readCard(cardId, abortController.signal);\r\n            setDeck({...currentDeck});\r\n            setCard({...currentCard});\r\n            setFormData({...currentCard});\r\n            \r\n            } catch(error) {console.log(error)};\r\n        };\r\n    \r\n        //getting and returning the deck fine but having issues setting state \r\n        \r\n        currentDeck(deckId, cardId);\r\n        \r\n        return () => abortController.abort()\r\n    \r\n        }, [deckId]);\r\n\r\n\r\n    \r\n\r\n    function changeHandler({ target }) {\r\n        setFormData({\r\n            ...formData,\r\n            [target.name]: target.value,\r\n        })\r\n    \r\n       }\r\n\r\n       const history = useHistory();\r\n\r\n       async function submitHandler(event) {\r\n        \r\n        event.preventDefault();\r\n       \r\n        const updatedCard = {...card, front: formData.front, back: formData.back}\r\n       \r\n        await updateCard(updatedCard, abortController.signal);\r\n        history.push(`/decks/${deckId}`);\r\n\r\n       }\r\n\r\n\r\n\r\n       return (\r\n        <div>\r\n            <nav aria-label=\"breadcrumb\">\r\n                <ol className=\"breadcrumb\">\r\n                    <li className=\"breadcrumb-item\"><Link to=\"/\">Home</Link></li>\r\n                    <li className=\"breadcrumb-item\"><Link to={`/decks/${deckId}`}>{deck.name}</Link></li>\r\n                    <li className=\"breadcrumb-item\"><p>{`Edit Card ${card.id}`}</p></li>\r\n                </ol>\r\n            </nav>\r\n            <h2>Edit Card</h2>\r\n            <CardForm submitHandler={submitHandler} formData={formData} changeHandler={changeHandler} deckId={deckId} />\r\n\r\n        </div>\r\n       )\r\n\r\n\r\n\r\n}\r\n\r\nexport default EditCard"],"mappings":"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"},"metadata":{},"sourceType":"module"}